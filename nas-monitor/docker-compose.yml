services:
  nas-monitor:
    build: .
    image: ghcr.io/jowtron/internet-monitor/nas-monitor:latest
    container_name: nas-monitor
    restart: unless-stopped
    environment:
      # Required: Set your VPS Tailscale IP
      - VPS_URL=http://YOUR_VPS_TAILSCALE_IP:5000
      # Required for speed test notifications
      - NTFY_TOPIC=your-ntfy-topic
      # Optional overrides
      - PING_TARGETS=1.1.1.1,8.8.8.8,9.9.9.9
      - PING_INTERVAL=30
      - HEARTBEAT_INTERVAL=60
      - HIGH_LATENCY_THRESHOLD=200
      - SLOW_SPEED_THRESHOLD=50
    volumes:
      # Persist logs to host
      - ./logs:/app/logs
    # Use host network for proper ping and Tailscale access
    network_mode: host
